{% form_theme form with '@EasyAdmin/crud/form_theme.html.twig' %}
{% extends '@EasyAdmin/page/content.html.twig' %}

{% block content_title %}New Purchase Page{% endblock %}

{% block body_class 'ea-new new-purchase-page' %}

{% block page_actions %}
    {{ parent() }}
    <button type="submit" class="btn btn-primary" form="newForm">Create</button>
{% endblock %}

{% block main %}
    {{ form_start(form, {attr: {id: 'newForm', class: 'ea-new-form'}}) }}

    <div class="col-12">
        <div class="row">
            <div class="col-md-8">
                <p>
                    Create tailored purchase pages for prospects and existing customers.
                </p>
            </div>
        </div>

        <div class="form-panel">
            <div class="form-panel-header">
                <div class="form-panel-title">
                    <a href="#" class="not-collapsible">
                        Account Details
                    </a>
                </div>
            </div>

            <div class="form-panel-body show">
                <div class="row">
                    {% if company %}
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="form_tenantId" class="form-control-label">Tenant</label>
                                <div class="form-widget">
                                    <a href="{{ ea_url().setController('App\\Controller\\Admin\\CompanyCrudController').setAction('detail').setEntityId(company.id) }}">{{ company }}</a>
                                    &mdash;
                                    {{ reasonName }}
                                </div>
                            </div>
                            {% if form.country is defined %}
                                {{ form_row(form.country) }}
                            {% endif %}
                        </div>
                    {% else %}
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="form_tenantId" class="form-control-label">Billing Profile</label>
                                <div class="form-widget">
                                    <a href="{{ ea_url().setController('App\\Controller\\Admin\\BillingProfileCrudController').setAction('detail').setEntityId(billingProfile.id) }}">{{ billingProfile }}</a>
                                    &mdash;
                                    {{ reasonName }}
                                </div>
                            </div>
                            {% if form.country is defined %}
                                {{ form_row(form.country) }}
                            {% endif %}
                        </div>
                    {% endif %}
                    <div class="col-md-4">
                        {{ form_row(form.expirationDate) }}
                    </div>
                    <div class="col-md-4">
                        {{ form_row(form.note) }}
                    </div>
                </div>
            </div>
        </div>

        <div class="form-panel">
            <div class="form-panel-header">
                <div class="form-panel-title">
                    <a href="#" class="not-collapsible">
                        Pricing
                    </a>
                </div>
            </div>

            <div class="form-panel-body show">
                <div class="row">
                    <div class="col-md-4">
                        {{ form_row(form.billingInterval) }}
                    </div>
                    <div class="col-md-4">
                        {{ form_row(form.paymentTerms) }}
                    </div>
                    <div class="col-md-4">
                        {{ form_row(form.activationFee) }}
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-6 pe-lg-5">
                        {{ form_row(form.productPricingPlans) }}
                    </div>
                    <div class="col-lg-6 ps-lg-5">
                        {{ form_row(form.usagePricingPlans) }}
                    </div>
                </div>
            </div>
        </div>

        {{ form_widget(form) }}
    </div>

    {{ form_end(form) }}

    <script type="text/javascript" src="{{ asset('build/bundles/easyadmin/field-collection.js') }}"></script>
{% endblock %}