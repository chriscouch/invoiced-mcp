<form name="taxRuleForm" ng-submit="save(rule, appliesTo)" class="below0">
	<div class="modal-header">
		<a role="button" class="close" ng-click="close()" aria-hidden="true">&times;</a>
		<h4 class="modal-title"><span ng-show="isExisting">Edit</span><span ng-hide="isExisting">New</span> Tax Rule</h4>
	</div>
	<div class="modal-body form-horizontal">
		<p class="required-indicator">
			<span class="required"></span> {{'general.indicates_required_field'|translate}}
		</p>

		<p class="alert alert-danger" ng-show="error">
			{{error.message}}
		</p>

		<div class="form-group" ng-if="rule.tax_rate">
			<label class="control-label col-sm-4">Tax Rate <span class="required"></span></label>
			<div class="col-sm-8 form-control-static">
				{{rule.tax_rate.name}}
				&mdash;
				<span ng-show="rule.tax_rate.is_percent">{{rule.tax_rate.value}}%</span>
				<money ng-hide="rule.tax_rate.is_percent" amount="rule.tax_rate.value" currency="rule.tax_rate.currency"></money>
				<div>
					<a href="" ng-click="selectTaxRate(rule)">
						Modify
						<span class="fas fa-caret-right"></span>
					</a>
				</div>
			</div>
		</div>

		<div class="form-group" ng-if="!rule.tax_rate">
			<label class="control-label col-sm-4">Tax Rate <span class="required"></span></label>
			<div class="col-sm-8 form-control-static" ng-if="rule.tax_rate">
				<span ng-show="rule.tax_rate.is_percent">{{rule.tax_rate.value}}%</span>
				<money ng-hide="rule.tax_rate.is_percent" amount="rule.tax_rate.value" currency="rule.tax_rate.currency"></money>
			</div>
			<div class="col-sm-8 form-control-static">
				<a href="" ng-click="selectTaxRate(rule)">
					Select
				</a>
			</div>
		</div>

		<div class="form-group">
			<label class="control-label col-sm-4">Applies To <span class="required"></span></label>
			<div class="col-sm-7">
				<div class="invoiced-select">
					<select ng-model="appliesTo">
						<option value="all">Everyone</option>
						<option value="country">Customers in specific country</option>
						<option value="state">Customers in specific state / province</option>
					</select>
				</div>
			</div>
		</div>

		<div class="form-group" ng-if="appliesTo=='state'||appliesTo=='country'">
			<label class="control-label col-sm-4">Country <span class="required"></span></label>
			<div class="col-sm-5">
				<country-selector ng-model="rule.country" is-required="true"></country-selector>
			</div>
		</div>

		<div class="form-group" ng-if="appliesTo=='state'">
			<label class="control-label col-sm-4">State / Province <span class="required"></span></label>
			<div class="col-sm-5">
				<state-selector ng-model="rule.state" country="rule.country" is-required="true"></state-selector>
			</div>
		</div>
	</div>
	<div class="modal-footer">
		<button type="submit" class="btn btn-primary Button" ng-disabled="taxRuleForm.$invalid||!rule.tax_rate||saving" v-busy="saving" v-busy-label="Saving" v-pressable>
			{{'general.save'|translate}}
		</button>
	</div>
</form>