<form name="modelForm" ng-submit="save(bundle)" class="below0">
	<div class="modal-header">
		<a role="button" class="close" ng-click="close()" aria-hidden="true">&times;</a>
		<h4 class="modal-title">
			<span ng-show="isExisting">Edit</span><span ng-hide="isExisting">New</span> Bundle
		</h4>
	</div>
	<div class="modal-body form-horizontal">
		<p class="required-indicator">
			<span class="required"></span> {{'general.indicates_required_field'|translate}}
		</p>
		<p class="alert alert-danger" ng-show="error">
			{{error.message}}
		</p>

		<!-- ID -->
		<div class="form-group" ng-show="isExisting">
			<label class="control-label col-sm-3">ID</label>
			<div class="col-sm-9 form-control-static">
				{{bundle.id}}
			</div>
		</div>

		<!-- Name -->
		<div class="form-group">
			<label class="control-label col-sm-3">Name <span class="required"></span></label>
			<div class="col-sm-6">
				<input type="text" placeholder="Bundle name..." ng-model="bundle.name" ng-change="generateID(bundle)" class="form-control" required />
			</div>
		</div>

		<!-- ID -->
		<div class="form-group" ng-hide="isExisting">
			<label class="control-label col-sm-3">ID <span class="required"></span></label>
			<div class="col-sm-4 form-control-static" ng-show="shouldGenID">
				<span class="start-typing-id" ng-hide="bundle.id">Start by typing name</span>
				{{bundle.id}}
				<a href="" ng-show="bundle.id" ng-click="shouldGenID=false;$event.preventDefault()">
					<span class="fas fa-pencil"></span>
				</a>
			</div>
			<div class="col-sm-4" ng-hide="shouldGenID">
				<input type="text" placeholder="Unique identifier..." ng-model="bundle.id" class="form-control" required />
			</div>
			<div class="col-sm-3 form-control-static">
				<a href="" tooltip="A unique identifier or SKU that represents this bundle, for internal use only. Allowed characters: a-Z, 0-9, _, -">
					What's this?
				</a>
			</div>
		</div>

		<!-- Currency -->
		<div class="form-group" ng-if="!isExisting&&hasMultiCurrency">
			<label class="control-label col-sm-3">{{'general.currency'|translate}} <span class="required"></span></label>
			<div class="col-sm-3">
				<currency-selector ng-model="bundle.currency" required></currency-selector>
			</div>
		</div>

		<!-- Items -->
		<div class="form-group">
			<label class="control-label col-sm-3">Items <span class="required"></span></label>
			<div class="col-sm-8 edit-bundle-items">
				<div class="no-items" ng-show="bundle.items.length===0">
					Please add at least 1 item
				</div>

				<div class="items" ng-class="{'count-1':bundle.items.length==1}" ui-sortable="sortableOptions" ng-model="bundle.items">
					<div class="item" ng-repeat="item in bundle.items">
						<div class="delete">
							<button type="button" class="btn btn-link btn-sm" ng-click="deleteItem(item)">
								<span class="fas fa-times"></span>
							</button>
						</div>
						<div class="sortable-handle" ng-class="{hidden:bundle.items.length==1}">
							<span class="fas fa-grip-lines"></span>
						</div>
						<div class="quantity">
							<input type="number" class="form-control input-sm" placeholder="Qty" ng-model="item.quantity" required />
						</div>
						<div class="title">
							<strong>{{item.catalog_item.name}}</strong>:
							<money amount="item.catalog_item.unit_cost" currency="item.catalog_item.currency" precision="settings.unit_cost_precision"></money>
						</div>
					</div>
				</div>

				<div class="buttons">
					<button type="button" class="btn btn-default" ng-click="addItem()">
						<span class="fas fa-plus"></span>
						Item
					</button>
				</div>
			</div>
		</div>
	</div>
	<div class="modal-footer">
		<button type="submit" class="btn btn-primary Button" ng-disabled="modelForm.$invalid||saving" v-busy="saving" v-busy-label="Saving" v-pressable>
			{{'general.save'|translate}}
		</button>
	</div>
</form>