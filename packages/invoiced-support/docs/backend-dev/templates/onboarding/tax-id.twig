{% trans_default_domain 'general' %}
{% set title='Tax ID Verification' %}
{% extends "onboarding/parent.twig" %}

{% block main %}

    <div class="d-flex align-items-center">
        <div class="container-lg container-fluid">
            <div class="row justify-content-center">
                <div class="col-12 col-lg-10 col-xl-8">
                    <form class="py-6" method="post" id="theForm">
                        <input type="hidden" name="_csrf_token" value="{{ csrf_token('onboarding') }}" />
                        <div class="row justify-content-center">
                            <div class="col-12 col-md-10 col-lg-8 col-xl-6 text-center">
                                <h6 class="mb-4 text-uppercase text-muted">
                                    Step {{ currentStepNumber }} of {{ totalSteps }}
                                </h6>

                                <h1 class="mb-3">
                                    Tax ID Verification
                                </h1>

                                <p class="mb-5 text-muted">
                                    We are going to verify your tax ID with the IRS.
                                </p>
                            </div>
                        </div>

                        {% for error in errors %}
                            <div class="text-danger mb-3" role="alert">{{ error }}</div>
                        {% endfor %}

                        <div class="row justify-content-center">
                            <div class="col-12 col-md-10 col-lg-8 col-xl-6">
                                {% if company.type == 'person' %}
                                    <div class="form-group">
                                        <label class="form-label mb-1">
                                            Owner Name
                                        </label>

                                        <div class="form-control-plaintext fw-bold">{{ company.name }}</div>
                                    </div>

                                    <div class="form-group">
                                        <label class="form-label mb-1">
                                            Social Security Number
                                        </label>

                                        <input type="text" class="form-control verify-tax-id-input" name="ssn" placeholder="Example: 123-45-6789" required="required" />
                                    </div>
                                {% else %}
                                    <div class="form-group">
                                        <label class="form-label mb-1">
                                            Legal Name
                                        </label>

                                        <div class="form-control-plaintext fw-bold">{{ company.name }}</div>
                                    </div>

                                    <div class="form-group">
                                        <label class="form-label mb-1">
                                            EIN
                                        </label>

                                        <input type="text" class="form-control verify-tax-id-input" name="ein" placeholder="Example: 12-3456789" required="required" />
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                        <hr class="my-5">

                        <h3>Why does Invoiced need this information?</h3>
                        <p>We're required to collect and verify certain information about our customers. Collecting tax information also assists businesses that pay you to comply with mandatory reporting of taxable income paid to contractors and vendors.</p>
                        <p>
                            <span class="fas fa-shield-check text-success"></span>
                            Protecting your information is our priority. Learn more about our <a href="https://www.invoiced.com/legal/terms" target="_blank">Terms of Service</a> and <a href="https://www.invoiced.com/legal/privacy" target="_blank">Privacy Policy</a>.</p>

                        <hr class="my-5">

                        <div class="nav row align-items-center justify-content-center text-center" role="tablist">
                            <div class="col">
                                {% if previousStep %}
                                    <a href="{{ path('onboarding_step', {step: previousStep, companyId: app.request.attributes.get('companyId')}) }}" class="btn btn-lg btn-white">
                                        Previous
                                    </a>
                                {% endif %}
                            </div>
                            <div class="col">
                                <h6 class="text-uppercase text-muted mb-0">
                                    Step {{ currentStepNumber }} of {{ totalSteps }}
                                </h6>
                            </div>
                            <div class="col">
                                <button type="submit" class="btn btn-lg btn-primary" id="theFormSubmit">
                                    Continue
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script type="text/javascript">
        $(function() {
            $('#theForm').on('submit', function () {
                $('#theFormSubmit').attr('disabled', 'disabled');
                return true;
            });
        });
    </script>

{% endblock %}
