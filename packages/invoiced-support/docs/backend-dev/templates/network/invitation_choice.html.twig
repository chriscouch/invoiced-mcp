{% extends "network/parent.twig" %}
{% if invitedAsCustomer %}
    {% set title = 'Approve Vendor' %}
{% else %}
    {% set title = 'Approve Customer' %}
{% endif %}
{% block bodyClass %}border-top border-top-3 border-primary{% endblock %}
{% block main %}
    <div class="container py-6">
        <div class="row justify-content-center">
            <div class="col-12 col-md-10 col-lg-8 col-xl-6 text-center">
                <h6 class="mb-4">
                    <img src="{{ asset("/img/logo.png") }}" width="137" height="35" alt="Invoiced" />
                </h6>

                <div class="card p-5">
                    <h1 class="mb-3">
                        {{ title }}
                    </h1>

                    <p class="mb-5 text-secondary">
                        {{ fromName }} has invited you to join their business network on Invoiced.
                    </p>

                    {% for error in app.flashes('invitation_error') %}
                        <div class="text-danger mb-3">{{ error }}</div>
                    {% endfor %}

                    {% if companies|length > 0 %}
                        <form action="{{ path('network_accept_invitation_for_company', {id: invitationId}) }}" method="POST">
                            <div class="form-group">
                                <label for="form_select_company" class="form-label required">
                                    Which company is this for?
                                </label>
                                <select id="form_select_company" name="company" class="form-select" required>
                                    <option value="">-- Select One</option>
                                    {% for company in companies %}<option value="{{ company.id }}">{{ company.name }}</option>{% endfor %}
                                </select>
                            </div>

                            <div class="form-group">
                                <button type="submit" class="btn btn-lg btn-primary">
                                    Approve
                                </button>
                            </div>
                        </form>
                    {% else %}
                        <div class="mb-3">
                            <div class="fs-3">
                                <label class="form-label mb-1">
                                    New to Invoiced?
                                </label>
                            </div>
                            <div class="mt-3">
                                <a href="{{ path('signup_form', {invitation: invitationId}) }}" class="btn btn-primary btn-lg">
                                    Create an Account
                                </a>
                            </div>
                        </div>
                        <hr/>
                        <div>
                            <div class="fs-3">
                                <label class="form-label mb-1">
                                    Already use Invoiced?
                                </label>
                            </div>
                            <div class="mt-3">
                                <a href="{{ path('login_redirect', {invitation: invitationId}) }}" class="btn btn-outline-dark">
                                    Sign In
                                </a>
                            </div>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
{% endblock %}
