<div class="two-col clearfix">
    <!-- Title -->
    <div class="title">{{ trans('headers.statement') }}</div>

    <div class="col">
        <!-- Logo -->
        <div class="logo">
            {% if company.logo %}<img src="{{ company.logo }}"  alt="logo"/>{% endif %}
        </div>

        <!-- From -->
        <div class="contact from">
            <div class="value">
                <div class="name">{{ company.name }}</div>
                <div class="address">{{ company.address|nl2br }}</div>
                {% if company.email %}<div class="email">{{ company.email }}</div>{% endif %}
                {% if company.phone %}<div class="phone">{{ company.phone }}</div>{% endif %}
                {% if company.website %}<div class="website">{{ company.website }}</div>{% endif %}
            </div>
        </div>

        <!-- To -->
        <div class="contact to">
            <div class="field">{% if theme.use_translations %}{{ trans('labels.bill_to') }}{% else %}{{ theme.to_title }}{% endif %}</div>
            <div class="value">
                {% if customer.attention_to %}<div class="attention_to">{{ trans('labels.attention_to') }}: {{ customer.attention_to }}</div>{% endif %}
                <div class="name">{{ customer.name }}</div>
                <div class="address">{{ customer.address|nl2br }}</div>
            </div>
        </div>
    </div>
</div>

{%  if statement.type == 'balance_forward' %}
    <!-- Account Balance -->
    <div class="summary">
        <h3>
            {% if statement.start %}
                {{ trans('titles.account_summary_since', {'%start_date%': statement.start, '%end_date%': statement.end}) }}
            {% else %}
                {{ trans('titles.account_summary', {'%date%': statement.end}) }}
            {% endif %}
        </h3>
        <table class="no-stripe">
            <tbody>
            {% if statement.previousBalance %}
                <tr>
                    <td>{{ trans('labels.previous_balance') }}</td>
                    <td>{{ statement.previousBalance|money }}</td>
                </tr>
            {% endif %}
            <tr>
                <td>{{ trans('labels.invoiced') }}</td>
                <td>{{ statement.totalInvoiced|money }}</td>
            </tr>
            <tr>
                <td>{{ trans('labels.statement_payments') }}</td>
                <td><span class="negative-sign">&#8211;</span>{{ statement.totalPaid|money }}</td>
            </tr>
            {% if statement.totalUnapplied %}
                <tr>
                    <td>{{ trans('labels.unapplied_payments') }}</td>
                    <td>{{ statement.totalUnapplied|money }}</td>
                </tr>
            {% endif %}
            </tbody>
            <tfoot>
            <tr>
                <th>{{ trans('labels.account_balance') }}</th>
                <th>{{ statement.balance|money }}</th>
            </tr>
            {% if statement.hasCredits %}
                <tr>
                    <th>{{ trans('labels.credit_balance') }}</th>
                    <th>{{ statement.creditBalance|money }}</th>
                </tr>
            {% endif %}
            </tfoot>
        </table>
    </div>

    <!-- Account Balance Detail -->
    <div class="detailed-summary">
        <h3>{{ trans('titles.account_detail') }}</h3>
        <table>
            <thead>
                <tr>
                    <th>{{ trans('columns.date') }}</th>
                    {% if statement.subCustomers %}<th>{{ trans('columns.customer') }}{% endif %}</th>
                    <th>{{ trans('columns.description') }}</th>
                    <th>{{ trans('columns.invoiced') }}</th>
                    <th>{{ trans('columns.paid') }}</th>
                    <th>{{ trans('columns.balance') }}</th>
                </tr>
            </thead>
            <tbody>
                {% for line in statement.accountDetail %}
                    <tr class="activity">
                        <td>{{ line.date }}</td>
                        {% if statement.subCustomers %}
                            <td>{{ line.customer.name }}</td>
                        {% endif %}
                        <td>{{ line.number }}</td>
                        <td>
                            {% if line.invoiced %}
                                {{ line.invoiced|money }}
                            {% endif %}
                        </td>
                        <td>
                            {% if line.paid %}
                                {{ line.paid|money }}
                            {% endif %}
                        </td>
                        <td>{{ line.balance|money }}</td>
                    </tr>
                {% endfor %}
                <tr class="border">
                    <td colspan="{% if statement.subCustomers %}6{% else %}5{% endif %}"></td>
                </tr>
                {% if statement.previousBalance %}
                    <tr class="totals">
                        <td>{{ trans('labels.previous_balance') }}</td>
                        <td colspan="{% if statement.subCustomers %}4{% else %}3{% endif %}"></td>
                        <td>{{ statement.previousBalance|money }}</td>
                    </tr>
                {% endif %}
                <tr class="totals">
                    <td>{{ trans('labels.total_invoiced') }}</td>
                    <td colspan="{% if statement.subCustomers %}2{% else %}1{% endif %}"></td>
                    <td>{{ statement.totalInvoiced|money }}</td>
                    <td colspan="2"></td>
                </tr>
                <tr class="totals">
                    <td>{{ trans('labels.total_paid') }}</td>
                    <td colspan="{% if statement.subCustomers %}3{% else %}2{% endif %}"></td>
                    <td>{{ statement.totalPaid|money }}</td>
                </tr>
                {% if statement.totalUnapplied %}
                    <tr class="totals">
                        <td>{{ trans('labels.unapplied_payments') }}</td>
                        <td colspan="{% if statement.subCustomers %}2{% else %}1{% endif %}"></td>
                        <td>{{ statement.totalUnapplied|money }}</td>
                        <td colspan="2"></td>
                    </tr>
                {% endif %}
            </tbody>
            <tfoot>
                <tr>
                    <th>{{ trans('labels.account_balance') }}</th>
                    <th colspan="{% if statement.subCustomers %}4{% else %}3{% endif %}"></th>
                    <th>{{ statement.balance|money }}</th>
                </tr>
            </tfoot>
        </table>
    </div>

    <!-- Credit Balance History -->
    {% if statement.hasCredits %}
        <div class="detailed-summary credits">
            <h3>{{ trans('titles.credit_balance_history') }}</h3>
            <table>
                <thead>
                    <tr>
                        <th>{{ trans('columns.date') }}</th>
                        <th>{{ trans('columns.description') }}</th>
                        <th>{{ trans('columns.issued') }}</th>
                        <th>{{ trans('columns.spent') }}</th>
                        <th>{{ trans('columns.balance') }}</th>
                    </tr>
                </thead>
                <tbody>
                    {% for line in statement.creditDetail %}
                        <tr class="activity">
                            <td>{{ line.date }}</td>
                            <td>{{ line.description }}</td>
                            <td>{{ line.issued|money }}</td>
                            <td>{{ line.charged|money }}</td>
                            <td>{{ line.creditBalance|money }}</td>
                        </tr>
                    {% endfor %}
                    <tr class="border">
                        <td colspan="5"></td>
                    </tr>
                    {% if statement.previousCreditBalance %}
                        <tr class="totals">
                            <td>{{ trans('labels.previous_balance') }}</td>
                            <td></td>
                            <td>{{ statement.previousCreditBalance|money }}</td>
                            <td></td>
                        </tr>
                    {% endif %}
                    <tr class="totals">
                        <td>{{ trans('labels.total_issued') }}</td>
                        <td></td>
                        <td>{{ statement.totalCreditsIssued|money }}</td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr class="totals">
                        <td>{{ trans('labels.total_spent') }}</td>
                        <td></td>
                        <td></td>
                        <td>{{ statement.totalCreditsSpent|money }}</td>
                        <td></td>
                    </tr>
                </tbody>
                <tfoot>
                    <tr>
                        <th>{{ trans('labels.credit_balance') }}</th>
                        <th></th>
                        <th></th>
                        <th></th>
                        <th>{{ statement.creditBalance|money }}</th>
                    </tr>
                </tfoot>
            </table>
        </div>
    {% endif %}
{% elseif statement.type == 'open_item' %}
    <!-- Open Item List -->
    <div class="detailed-summary">
        {% if statement.pastDueOnly %}
            <h3>{{ trans('titles.past_due_items', {'%date%': statement.end}) }}</h3>
        {% else %}
            <h3>{{ trans('titles.open_items', {'%date%': statement.end}) }}</h3>
        {% endif %}
        <table>
            <thead>
                <tr>
                    <th>{{ trans('columns.date') }}</th>
                    {% if statement.subCustomers %}<th>{{ trans('columns.customer') }}</th>{% endif %}
                    <th>{{ trans('columns.description') }}</th>
                    <th>{{ trans('columns.total') }}</th>
                    <th>{{ trans('columns.due_date') }}</th>
                    <th>{{ trans('columns.balance') }}</th>
                </tr>
            </thead>
            <tbody>
            {% for line in statement.accountDetail %}
                <tr class="activity">
                    <td>{{ line.date }}</td>
                    {% if statement.subCustomers %}
                        <td>{{ line.customer.name }}</td>
                    {% endif %}
                    <td>{{ line.number }}</td>
                    <td>{{ line.total|money }}</td>
                    <td>{{ line.dueDate }}</td>
                    <td>{{ line.balance|money }}</td>
                </tr>
            {% endfor %}
            </tbody>
            <tfoot>
                <tr>
                    <th>
                        {% if statement.pastDueOnly %}
                            {{ trans('labels.past_due_balance') }}
                        {% else %}
                            {{ trans('labels.total_balance') }}
                        {% endif %}
                    </th>
                    <th colspan="{% if statement.subCustomers %}4{% else %}3{% endif %}"></th>
                    <th>{{ statement.balance|money }}</th>
                </tr>
            </tfoot>
        </table>
    </div>
{% endif %}
